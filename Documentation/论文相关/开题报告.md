# 开题报告

- 论文题目：Xx功能的App应用设计与开发（基于Unity3D的跨平台回合制游戏App应用设计与开发）
- 专业：计算机科学与技术
- 学生姓名：阮复伸
- 学号：181713600007

## 选题背景、研究意义及研究现状
1. 选题的背景
    Unity3D是由Unity Technologies开发的一个让玩家轻松创建诸如三维视频游戏、建筑可视化、实时三维动画等类型互动内容的多平台的综合型游戏开发工具，是一个全面整合的专业游戏引擎。Unity类似于Director,Blender game engine, Virtools 或 Torque Game Builder等利用交互的图型化开发环境为首要方式的软件。其编辑器可运行在Windows、Linux、Mac OS X下，可发布游戏至Windows、Mac、Wii、iPhone、WebGL、Android等多种类型的平台上。
    Unity3D在2018年引入了可编程渲染管线(Scriptable Render Pipeline)的概念，SRP主要分为两个方向，针对于PC、PS4、XBOX等高性能设备的High Definition Render Pipeline(HDRP)，和针对于移动设备、网页平台的Light Weight Render Pipeline(LWRP)。SRP的引入，使得开发者可以使用C#代码来控制渲染过程中，各个物体的渲染顺序和效果，让程序和渲染更加灵活、效率更高。
    同样，Unity3D在2018年还引入了全新的ECS开发理念。传统的GameObject-MonoBehaviour机制适合无基础的新手快速入门，但是随着项目的复杂度不断增加，这种传统的架构会让代码变得难以阅读、维护和优化。而Unity3D新的ECS(Entity-Component-System)开发理念，因Blizzard开发的射击游戏OverWatch被开发者所熟知。ECS开发理念主要关注如何组建并处理游戏中的数据和行为。
    使用了LWRP与ECS流程制作的Unity3D移动端游戏，相较于传统PBR流程制作的游戏，有以下优势：
    1. 程序结构更加清晰，代码易于维护。
    2. 在较低性能的移动端运行时，也可以启用更多的动态光照，保证画面的渲染效果。
    3. LWRP与Shader Graph相结合，以更少的性能消耗实现相同，甚至更好的粒子特效、环境光照、PostProcessing。

2. 研究意义
    LWRP与ECS相结合的项目流程，目前多应用在大型多人在线MMORPG或者3A单机游戏中，在中小型独立游戏中却很少有此类流程的应用。而且LWRP与传统BPR项目在SubstanceDesigner贴图生成、材质制作、后期效果表现等环节内也有很大的不同。在LWRP中，Unity3D还支持了图形化基于节点的Shader编辑器Shader Graph，可以更加快速和高效地实现粒子或模型的特殊表现效果。
    本论文尝试使用LWRP、ECS等Unity3D的新特性，以一款简单的独立游戏为载体，实现在移动平台(iPhone6s至iPhone11 Pro Max或同代Android设备)中，RunTime下更好的画面渲染效果、更多动态光照、在创建或销毁GameObject和粒子时帧率相对稳定等效果。

3. 研究现状
    目前，各大应用市场中，使用Unity3D ECS框架与LWRP渲染管线的三维项目非常少，多数移动端游戏中，还是一传统的BPR渲染方式为主。PostProcessing大多依赖第三方组件，可靠性与稳定性较差。shader编写时使用代码编辑器或者第三方可视化插件，复杂度高。
    但是，目前Unity3D ECS框架中所依赖的主要类库，均为Beta版本，有很多的不确定性，在各类主流移动端设备上未进行充分测试。并且在项目编码过程中，Unity3D官方可能会更新ECS框架类库，导致项目部分功能需要重写。

## 研究的基本内容，拟解决的主要问题
1. 研究内容
   1. Untiy3D ECS与传统GameObject-MonoBehaviour之间代码结构的差别。
   2. 使用LWRP LitShader时，各个贴图的作用，以及各类参数所影响的表现效果。
   3. SubstanceDesigner中如何生成LWRP可用节点。
   4. 使用LWRP Shader Graph编写自定义shader。
   5. ECS在主流移动端设备的运行效率和稳定性。

2. 预期目标
   1. 明确LWRP中贴图美术流程。模型贴图制作、SubstanceDesigner中LWRP节点生成、各类贴图对应LWRP LitShader中各类通道的表现效果。
   2. 实现LWRP中水面的反射与折射的表现效果。
   3. ECS在整个游戏流程中的应用。

## 研究步骤、方法
1. 参照官方文档，了解ECS的概念及实现方法。
2. 参照官方文档，了解LWRP中PostProcessing Volume的使用方法，与贴图的基本制作流程。
3. 编写独立游戏的Game Design Document。
4. 根据Game Design Document，在ECS框架内编写游戏代码，使用LWRP渲染模式组织美术资源。
5. 测试实机运行效率。
6. 发布应用。

## 论文（设计）的工作进度安排
2019年9月 提交开题报告
2019年9月 - 2019年10月 学习官方ECS、LWRP文档
2019年10月 - 2019年11月 编写Game Design Document
2019年11月 - 2020年3月 编写项目逻辑代码与Shader
2020年4月 真机测试、BUG修复
2020年5月 撰写论文，准备答辩

## 参考文献
[1] 陈嘉栋 [M] 《Unity3D 脚本编程 使用C#语言开发跨平台游戏》 北京 电子工业出版社 2019.6
[2] Scott Rogers [M] 《通关 游戏设计之道》 北京 人民邮电出版社 2013.11
[3] Erich Gamma [M] 《Design Patterns》 北京 机械工业出版社 2019.5
[4] 冯乐乐 [M] 《Unity Shader入门精要》 北京 人民邮电出版社 2016.6
[5] 加藤政村 [M] 《Unity游戏设计与实现  南梦宫一线程序员的开发实例》 北京 人民邮电出版社 2015.2
[6] Unity3D官方LWRP文档 [DB/OL] https://docs.unity3d.com/Packages/com.unity.render-pipelines.lightweight@6.9/manual/index.html
[7] Unity3D ECS官方介绍 [DB/OL] https://connect.unity.com/p/part-1-unity-ecs-briefly-about-ecs
[8] Unity官方ECS项目Github源码 [DB/OL] https://github.com/Unity-Technologies/EntityComponentSystemSamples